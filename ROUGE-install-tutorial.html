<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="e_qCquDa463mtD8DRDjvZPPe2yJ0bjXAz_jj79kaz0M" />








  <meta name="baidu-site-verification" content="LQMMtIjEz0" />







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="ROUGE,ubuntu," />










<meta name="description" content="说在前面自从实习之后好久没有更新博客了，实习归来，找工作告一段落，还是要继续写(bie)论文啦！按照之前的打算，继续做文档自动摘要相关。近期在跑一篇论文的源码（pointer-generator）。运行过程中，在计算ROUGE分数的时候遇到一些问题，靠着强大的度娘和万能的网友解决了，在此记录一下。 遇到的问题运行最后一步，计算ROUGE分，报错：查看教程，发现有段介绍如下：  decode.py">
<meta name="keywords" content="ROUGE,ubuntu">
<meta property="og:type" content="article">
<meta property="og:title" content="Ubuntu系统下ROUGE安装教程">
<meta property="og:url" content="http://yoursite.com/ROUGE-install-tutorial.html">
<meta property="og:site_name" content="今晚月色很美">
<meta property="og:description" content="说在前面自从实习之后好久没有更新博客了，实习归来，找工作告一段落，还是要继续写(bie)论文啦！按照之前的打算，继续做文档自动摘要相关。近期在跑一篇论文的源码（pointer-generator）。运行过程中，在计算ROUGE分数的时候遇到一些问题，靠着强大的度娘和万能的网友解决了，在此记录一下。 遇到的问题运行最后一步，计算ROUGE分，报错：查看教程，发现有段介绍如下：  decode.py">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/ROUGE-install-tutorial/rouge-error.png">
<meta property="og:image" content="http://yoursite.com/ROUGE-install-tutorial/pyrouge-error.png">
<meta property="og:updated_time" content="2018-10-24T08:51:56.457Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ubuntu系统下ROUGE安装教程">
<meta name="twitter:description" content="说在前面自从实习之后好久没有更新博客了，实习归来，找工作告一段落，还是要继续写(bie)论文啦！按照之前的打算，继续做文档自动摘要相关。近期在跑一篇论文的源码（pointer-generator）。运行过程中，在计算ROUGE分数的时候遇到一些问题，靠着强大的度娘和万能的网友解决了，在此记录一下。 遇到的问题运行最后一步，计算ROUGE分，报错：查看教程，发现有段介绍如下：  decode.py">
<meta name="twitter:image" content="http://yoursite.com/ROUGE-install-tutorial/rouge-error.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/ROUGE-install-tutorial.html"/>





  <title>Ubuntu系统下ROUGE安装教程 | 今晚月色很美</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">今晚月色很美</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ROUGE-install-tutorial.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="BeckyWang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="今晚月色很美">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Ubuntu系统下ROUGE安装教程</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-24T15:34:01+08:00">
                2018-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="说在前面"><a href="#说在前面" class="headerlink" title="说在前面"></a>说在前面</h2><p>自从实习之后好久没有更新博客了，实习归来，找工作告一段落，还是要继续写(bie)论文啦！<br>按照之前的打算，继续做文档自动摘要相关。近期在跑一篇论文的源码（<a href="https://github.com/abisee/pointer-generator" target="_blank" rel="noopener">pointer-generator</a>）。<br>运行过程中，在计算ROUGE分数的时候遇到一些问题，靠着强大的度娘和万能的网友解决了，在此记录一下。</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>运行最后一步，计算ROUGE分，报错：<br><img src="/ROUGE-install-tutorial/rouge-error.png" alt="error"><br>查看教程，发现有段介绍如下：</p>
<blockquote>
<p>decode.py uses the Python package pyrouge to run ROUGE evaluation. pyrouge provides an easier-to-use interface for the official Perl ROUGE package, which you must install for pyrouge to work. </p>
</blockquote>
<p>要注意的是，这里有两个工具ROUGE和pyrouge。<br>pyrouge（<a href="https://pypi.org/project/pyrouge/" target="_blank" rel="noopener">下载地址</a>，我是用的版本是0.1.3）是一个Python包，旨在通过自动将摘要转换为ROUGE理解的格式并自动生成ROUGE配置文件，使ROUGE得分更容易。<strong>使用pyrouge必须安装ROUGE</strong>。 </p>
<h2 id="ROUGE简介"><a href="#ROUGE简介" class="headerlink" title="ROUGE简介"></a>ROUGE简介</h2><p>ROUGE是由微软亚洲研究院知识挖掘组(The Knowledge Mining group at Microsoft Research Asia)调研经理(research manager) Chin-Yew Lin 研发的，用于摘要的自动评价，通过比较机器自动生成的摘要(called system_summary)与人工生成的摘要(called model_summary, 认为它是理想的)中重叠单元的数量，来评价机器自动生成的摘要。该方法中考虑的重叠单元有n-gram, word sequences, word-pairs等，并提出了四个测量标准ROUGE-N, ROUGE-L, ROUGE-W, ROUGE-S。<br>该包用Perl语言编写，代码中使用的版本为ROUGE-1.5.5。<br>后来我发现已经有ROUGE-2.0版本，好像是用java写的。。。 </p>
<p>教程中还有一段话：</p>
<blockquote>
<p>Note: As of 18th May 2017 the website for the official Perl package appears to be down. Unfortunately you need to download a directory called ROUGE-1.5.5 from there. As an alternative, it seems that you can get that directory from here (however, the version of pyrouge in that repo appears to be outdated, so best to install pyrouge from the official source).</p>
</blockquote>
<p>大概的意思是，ROUGE的官网已经关闭，我们已经下不到ROUGE-1.5.5包，可以从其他地方寻找替代。<br>原来这是一个烂尾工程！！</p>
<h2 id="ROUGE安装教程"><a href="#ROUGE安装教程" class="headerlink" title="ROUGE安装教程"></a>ROUGE安装教程</h2><p>好了找到问题所在，上网寻找解决办法，真的找了好多资料啊我。<br>功夫不负有心人，还真找到了一个，参考<a href="https://blog.csdn.net/Hay54/article/details/78744912" target="_blank" rel="noopener">这篇教程</a>成功安装ROUGE。真心给这个博主打call！<br>在添加ROUGE环境变量那一步，不知道为什么我的sudo geidt有些问题，所以直接用vim改写文件，添加环境变量。</p>
<pre><code>sudo vim /etc/profile
</code></pre><h2 id="测试pyrouge是否能使用"><a href="#测试pyrouge是否能使用" class="headerlink" title="测试pyrouge是否能使用"></a>测试pyrouge是否能使用</h2><p>按照<a href="https://pypi.org/project/pyrouge/" target="_blank" rel="noopener">pyrouge</a>的教程，进行测试。 </p>
<ol>
<li>安装pyrouge <code>pip install pyrouge</code></li>
<li>告诉pyrouge ROUGE的绝对路径 <code>pyrouge_set_rouge_path /absolute/path/to/ROUGE-1.5.5/directory</code><br>例如我的ROUGE文件放在了/root/RELEASE-1.5.5下，就设置为<br><code>pyrouge_set_rouge_path /root/RELEASE-1.5.5</code></li>
<li>运次测试 <code>python -m pyrouge.test</code></li>
</ol>
<p>好了，如果一切没问题，就会显示<br><code>Ran 10 tests in 18.055s
OK</code><br>但是问题有这么简单吗，果然报错：<br><img src="/ROUGE-install-tutorial/pyrouge-error.png" alt="pyrouge-error"></p>
<p>根据<a href="https://blog.csdn.net/MerryCao/article/details/49174283" target="_blank" rel="noopener">这篇教程</a>完美解决，发现问题及解决问题的过程博主介绍的非常详细。<br>划重点！<br>修改Rouge155_test.py文件的第208行(test_options(self)函数中)如下：</p>
<pre><code>pyrouge_evaluate_plain_text_files -m {} -s {} -sfp
</code></pre><p>同理对于test_write_config( )函数报错，修改Rouge155_test.py文件第192行如下：</p>
<pre><code>pyrouge_write_config_file -m {m} -s {s}
</code></pre><p>再次运行测试，error没有了，但是有几个failure。在<a href="https://github.com/bheinzerling/pyrouge/issues/6" target="_blank" rel="noopener">github的issue6里</a>，作者解释是因为测试用例已过时，建议更新到最新版本。<br>我在Rouge155.py中并没有查到pyrouge_evaluate_plain_text_files相关字段，这个问题只出现在测试过程中，猜测正式代码没问题，测试的failure不解决应该没影响。</p>
<h2 id="大功告成"><a href="#大功告成" class="headerlink" title="大功告成"></a>大功告成</h2><p>一天的折腾，成功解决，代码可以成功计算出各种ROUGE分数！感谢几个给予帮助的博主！</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ROUGE/" rel="tag"><i class="fa fa-tag"></i> ROUGE</a>
          
            <a href="/tags/ubuntu/" rel="tag"><i class="fa fa-tag"></i> ubuntu</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/h5-iframe.html" rel="next" title="H5页面PC富文本内容自适应显示">
                <i class="fa fa-chevron-left"></i> H5页面PC富文本内容自适应显示
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="BeckyWang" />
            
              <p class="site-author-name" itemprop="name">BeckyWang</p>
              <p class="site-description motion-element" itemprop="description">前端小菜鸟，减肥爱好者</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/BeckyWang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="wangbeibei01018@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#说在前面"><span class="nav-number">1.</span> <span class="nav-text">说在前面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#遇到的问题"><span class="nav-number">2.</span> <span class="nav-text">遇到的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ROUGE简介"><span class="nav-number">3.</span> <span class="nav-text">ROUGE简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ROUGE安装教程"><span class="nav-number">4.</span> <span class="nav-text">ROUGE安装教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试pyrouge是否能使用"><span class="nav-number">5.</span> <span class="nav-text">测试pyrouge是否能使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#大功告成"><span class="nav-number">6.</span> <span class="nav-text">大功告成</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BeckyWang</span>

  
</div>



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
